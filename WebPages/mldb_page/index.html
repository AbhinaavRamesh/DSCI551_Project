<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body  onload="viewDataset()">
    <div class="container" style="width:100%;">
        <nav class="navbar navbar-inverse" style="width:100%;">
            <div class="container" style="width:100%;">
                <div class="row" style="width:100%;margin-left: 2%;margin-right: 2%;margin-top: 1%;">
                  <div class="col">

                    <h3 class="nav navbar-nav navbar-header" style="color: white;text-align: center;">Movie Recommendation Application</h3>
                  </div>
                  <div class="col-6">
                    
                  </div>
                  <div class="col">
                    <ul class="nav navbar-nav navbar-right" style="margin-right: 3%;">
                        <li ><a href="#" onclick="history.go(-1)">Back</a></li>
                        
    
                    </ul>
                  </div>
                </div>
            </div>
        </nav>
        <br>
        <h3> ML Dataset Content </h3>
        </br>

<link rel="stylesheet" href="https://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
<script type="text/javascript" src="https://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
        <div class="container" style="width:80%;align-items: center;">
            <div class="row header" style="text-align:center;color:green">
                <h3> ML Dataset </h3>
            </div>
            <table id="example" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th>TimeStamp</th>
                        <th>Filter Info</th>
                        <th>Num of Clusters</th>
                        <th>Features</th>
                        <th>Recommendations</th>
                        <th>Data length</th>
                        <th>Similar Movies</th>
                    </tr>
                </thead>
                <tbody id="table_body">
                </tbody>
                <tfoot>
                    <tr>
                        <th>TimeStamp</th>
                        <th>Filter Info</th>
                        <th>Num of Clusters</th>
                        <th>Features</th>
                        <th>Recommendations</th>
                        <th>Data length</th>
                        <th>Similar Movies</th>
                    </tr>
                </tfoot>
            </table>
        </div>
        
    </div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

    var config = { headers: {  
    'Content-Type': 'application/json',
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Methods': 'GET,POST,OPTIONS,DELETE,PUT'}
}

const viewDataset = () => {
    console.log("inside view dataset");
    post_data = {}
    axios.get('http://localhost:8082/view_mldb_data/', JSON.stringify(post_data),config)
    .then(response => {
    
        const data = response.data.data;
        // console.log(data);

        // var table_body = document.getElementById("table_body");
        // table_body.innerHTML = "";
        // var tb = $('#example').DataTable();
        // tb.clear().draw();
        // tb.destroy();

        var table = document.getElementById("table_body");
        for (var i = 0; i < data.length; i++){
            var tr = document.createElement('tr');   
            
            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var td4 = document.createElement('td');
            var td5 = document.createElement('td');
            var td6 = document.createElement('td');
            var td7 = document.createElement('td');
            var td8 = document.createElement('td');

        
            var text1 = document.createTextNode(data[i][0]);
            var text2 = document.createTextNode(data[i][1]);
            var text4 = document.createTextNode(data[i][3]);
            var text5 = document.createTextNode(data[i][4]);
            var text6 = document.createTextNode(data[i][5]);
            var text7 = document.createTextNode(data[i][6]);
            var text8 = document.createTextNode(data[i][7]);

        
            td1.appendChild(text1);
            td2.appendChild(text2);
            td4.appendChild(text4);
            td5.appendChild(text5);
            td6.appendChild(text6);
            td7.appendChild(text7);
            td8.appendChild(text8);
            tr.appendChild(td1);
            tr.appendChild(td2);
            tr.appendChild(td4);
            tr.appendChild(td5);
            tr.appendChild(td6);
            tr.appendChild(td7);
            tr.appendChild(td8);
        
            table.appendChild(tr);
        }

        $(document).ready(function() {
            $('#example').DataTable();
            } );
    });

    

}
</script>
</body>